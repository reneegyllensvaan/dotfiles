source ~/.neomuttrc-user
source ~/.neomuttrc-unbind

# GPG Config
set pgp_auto_decode 
set smime_self_encrypt = yes

set pager_index_lines=10
set sort = reverse-date-received
# notmuch
#message-hook ~A 'push "<modify-labels>-unread\n"'
set virtual_spoolfile=yes                          # enable virtual folders
set sendmail="/PATH/TO/bin/nm_sendmail"            # enables parsing of outgoing mail
virtual-mailboxes \
    "All mail"  "notmuch://?query=*"\
    "inBox"     "notmuch://?query=tag:inbox and NOT tag:archive"\
    "Unread"    "notmuch://?query=tag:unread"\
    "Important" "notmuch://?query=tag:important"\
    "Saved"     "notmuch://?query=tag:saved"\
    "Old"       "notmuch://?query=tag:old"\
    "senT"      "notmuch://?query=tag:sent"\
    "Github"    "notmuch://?query=tag:github"\
    "trEllo"    "notmuch://?query=tag:trello"\
    "orders"    "notmuch://?query=tag:orders"\
    "newsletters" "notmuch://?query=tag:newsletters"\
    "lists"    "notmuch://?query=tag:lists"\
    "attachment" "notmuch://?query=tag:attachment"\
    "trash"    "notmuch://?query=tag:trash"
# set the default vfolder
#change-vfolder inbox
# notmuch bindings
macro index \\\\ "<vfolder-from-query>"
#macro index r "<modify-labels>-unread -inbox\n"
macro index ! "<modify-labels-then-hide>!unread\n"
macro index I "<modify-labels-then-hide>!important\n"
macro index,pager s  "<modify-labels-then-hide>-inbox -unread +old\n"
macro index,pager D  "<modify-labels-then-hide>-inbox -unread +trash\n"
macro index,pager mo "<modify-labels-then-hide>-inbox -unread +orders\n"
macro index + "<modify-labels>+*\n<sync-mailbox>"
macro index - "<modify-labels>-*\n<sync-mailbox>"
bind index L modify-labels
bind index Y edit-label

# Vfolder keybindings
macro index ba "<change-vfolder>All mail\n"
macro index bb "<change-vfolder>inBox\n"
macro index be "<change-vfolder>trEllo\n"
macro index bo "<change-vfolder>Old\n"
macro index bt "<change-vfolder>senT\n"
macro index bu "<change-vfolder>Unread\n"
macro index bg "<change-vfolder>Github\n"
macro index bl "<change-vfolder>Lists\n"
macro index bn "<change-vfolder>Newsletters\n"
macro index bi "<change-vfolder>Important\n"

# sidebar
set sidebar_width   = 20
set sidebar_visible = no
color sidebar_new yellow default
# sidebar bindings
bind index <left> sidebar-prev          # got to previous folder in sidebar
bind index <right> sidebar-next         # got to next folder in sidebar
bind index <space> sidebar-open         # open selected folder from sidebar
# sidebar toggle
macro index ,@) "<enter-command> set sidebar_visible=no; macro index ~ ,@( 'Toggle sidebar'<Enter>"
macro index ,@( "<enter-command> set sidebar_visible=yes; macro index ~ ,@) 'Toggle sidebar'<Enter>"
macro index ~ ,@( 'Toggle sidebar'      # toggle the sidebar

bind index <Return> display-message
bind index G last-entry
bind index gg first-entry
bind generic,index,pager,index q exit
bind generic,index j next-entry
bind generic,index k previous-entry
bind index \Cu previous-page
bind index \Cd next-page
bind pager j next-line
bind pager k previous-line
bind pager \CJ next-entry
bind pager \CK previous-entry
